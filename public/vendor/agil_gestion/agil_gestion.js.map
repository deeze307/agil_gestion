{"version":3,"sources":["config.js","factory/agcore.factory.js","factory/modal.factory.js"],"names":[],"mappings":"AAAA;AACA;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"agil_gestion.js","sourcesContent":["var app = angular.module(\"app\", ['ngRoute','chieffancypants.loadingBar','ngAnimate','ui.bootstrap','angular-toasty','cfp.loadingBar','datatables']);\r\n","app.factory('AgCore',[\r\n    \"$http\",\"$rootScope\",\"$q\",\"cfpLoadingBar\", \"Modal\",\"$log\",\r\n    function($http,$rootScope,$q,cfpLoadingBar, Modal, $log) {\r\n        var interfaz = {};\r\n\r\n        interfaz.http = function (options) {\r\n            var isTimeout = false,\r\n                httpRequest,\r\n                httpRequestOptions;\r\n\r\n            var rt = {};\r\n            rt.canceled = false;\r\n            rt.result = $q.defer();\r\n            rt.timeout = $q.defer();\r\n            rt.promise = null;\r\n\r\n            rt.cancel = function () {\r\n                isTimeout = true;\r\n                rt.timeout.resolve();\r\n                rt.result.reject();\r\n                rt.canceled = true;\r\n                cfpLoadingBar.complete();\r\n            };\r\n\r\n            if (!options.timeout) {\r\n                options.timeout = 30;\r\n            }\r\n            ;\r\n\r\n            setTimeout(function () {\r\n                isTimeout = true;\r\n                rt.timeout.resolve();\r\n            }, (1000 * options.timeout));\r\n\r\n            httpRequestOptions = {\r\n//            headers:  { 'X-Requested-With': 'XMLHttpRequest' },\r\n                method: options.method,\r\n                url: options.url,\r\n                cache: false,\r\n                timeout: rt.timeout.promise,\r\n            };\r\n\r\n            if (options.data) {\r\n                httpRequestOptions.data = options.data\r\n            }\r\n            ;\r\n\r\n            httpRequest = $http(httpRequestOptions);\r\n\r\n            httpRequest.success(function (data, status, headers, config) {\r\n                rt.result.resolve(data);\r\n            });\r\n\r\n            httpRequest.error(function (data, status, headers, config) {\r\n                if (isTimeout) {\r\n                    if (rt.canceled) {\r\n                        /*                        rt.result.reject({\r\n                         message: 'Canceled: ' + options.url\r\n                         });*/\r\n                    } else {\r\n                        rt.result.reject({\r\n                            error: 'HTTP Timeout (' + options.timeout + ' seg)'\r\n                        });\r\n                    }\r\n                } else {\r\n                    if (status === 0) {\r\n                        rt.result.reject({\r\n                            error: \"No se detecto conexion de red\"\r\n                        });\r\n                    } else {\r\n                        rt.result.reject({\r\n                            error: \"ERROR: \" + status\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n\r\n            return rt;\r\n        };\r\n\r\n        interfaz.modal = function (options) {\r\n            var btype = BootstrapDialog.TYPE_PRIMARY;\r\n            switch (options.type) {\r\n                case 'danger':\r\n                    btype = BootstrapDialog.TYPE_DANGER;\r\n                    break;\r\n                case 'default':\r\n                    btype = BootstrapDialog.TYPE_DEFAULT;\r\n                    break;\r\n                case 'success':\r\n                    btype = BootstrapDialog.TYPE_SUCCESS;\r\n                    break;\r\n                case 'warning':\r\n                    btype = BootstrapDialog.TYPE_WARNING;\r\n                    break;\r\n                case 'info':\r\n                    btype = BootstrapDialog.TYPE_INFO;\r\n                    break;\r\n                case 'primary':\r\n                    btype = BootstrapDialog.TYPE_PRIMARY;\r\n                    break;\r\n            }\r\n\r\n            if (!$rootScope.modalOpened) {\r\n                Modal.create(options.scope, options.title, options.route, btype, options.controller, options.ignoreloadingbar);\r\n            }\r\n        };\r\n\r\n        interfaz.modalError = function (scope, err_msg) {\r\n            if (!$rootScope.modalOpened) {\r\n                Modal.error(scope, err_msg);\r\n            }\r\n            ;\r\n        };\r\n\r\n        interfaz.storage = function (options) {\r\n            if (options.value) {\r\n                var save_value = options.value;\r\n                if (options.json) {\r\n                    save_value = JSON.stringify(options.value);\r\n                }\r\n                window.localStorage.setItem(options.name, save_value);\r\n            } else {\r\n                var get_value = window.localStorage.getItem(options.name);\r\n                if (options.json) {\r\n                    return JSON.parse(get_value);\r\n                } else {\r\n                    return get_value;\r\n                }\r\n            }\r\n        };\r\n\r\n        interfaz.sweetAlert = function (_options){\r\n            var options = _options.options;\r\n            !function($) {\r\n                \"use strict\";\r\n                var SweetAlert = function() {};\r\n\r\n                SweetAlert.prototype.init = function() {\r\n                    swal({\r\n                        //Opciones de visualizaci贸n de mensaje\r\n                        title: options.title,\r\n                        text: options.text,\r\n                        type: options.type,\r\n                        showCancelButton: options.showCancelButton,\r\n                        confirmButtonColor: options.confirmButtonColor,\r\n                        confirmButtonText: options.confirmButtonText,\r\n                        cancelButtonText: options.cancelButtonText,\r\n                        closeOnConfirm: options.closeOnConfirm,\r\n                        closeOnCancel: options.closeOnCancel\r\n                    }, function(isConfirm){\r\n                        if (isConfirm) {\r\n                            $http.get(options.actionConfirmRoute).then(function(response){\r\n                               if(response.data == 'ok'){\r\n                                   swal(options.actionConfirmTitle, options.actionConfirmText, options.actionConfirmType);\r\n                                   $rootScope.callBackSweetAlert('ya fueeeeee!!!');\r\n                               }else{\r\n                                   swal('Error','Ocurri贸 un error al intentar realizar la operaeci贸n.','error');\r\n                                   $rootScope.callBackSweetAlert('apaaaa, no fueeee!!!');\r\n                               }\r\n                            });\r\n\r\n                        } else {\r\n                            swal(options.actionCancelTitle, options.actionCancelText, options.actionCancelType);\r\n                            return false;\r\n                        }\r\n                    });\r\n                },\r\n                    //init\r\n                    $.SweetAlert = new SweetAlert, $.SweetAlert.Constructor = SweetAlert\r\n            }(window.jQuery),\r\n\r\n                //initializing\r\n                function($) {\r\n                    \"use strict\";\r\n                    $.SweetAlert.init()\r\n                }(window.jQuery);\r\n        };\r\n\r\n        interfaz.successSweetAlert = function(_options) {\r\n            var options = _options.options;\r\n            !function($) {\r\n                \"use strict\";\r\n                var SweetAlert = function() {};\r\n\r\n                SweetAlert.prototype.init = function() {\r\n                    swal({\r\n                        //Opciones de visualizaci贸n de mensaje\r\n                        title: options.title,\r\n                        text: options.text,\r\n                        type: options.type,\r\n                        showCancelButton: false,\r\n                        confirmButtonColor: options.confirmButtonColor,\r\n                        confirmButtonText: \"Cerrar\",\r\n                        closeOnConfirm: true\r\n\r\n                    },function(){\r\n                        swal();\r\n                    });\r\n                },\r\n                    //init\r\n                    $.SweetAlert = new SweetAlert, $.SweetAlert.Constructor = SweetAlert\r\n            }(window.jQuery),\r\n\r\n                //initializing\r\n                function($) {\r\n                    \"use strict\";\r\n                    $.SweetAlert.init()\r\n                }(window.jQuery);\r\n        };\r\n\r\n        return interfaz;\r\n    }]);","app.factory('Modal',[\r\n    \"$http\",\"$compile\",\"$rootScope\",\"$timeout\",\r\n    function($http,$compile,$rootScope, $timeout) {\r\n        var modalScope;\r\n        var parentScope;\r\n        var interfaz = {};\r\n\r\n        interfaz.build = function(title, template, type) {\r\n            if(type == undefined) {\r\n                type = BootstrapDialog.TYPE_PRIMARY;\r\n            }\r\n            BootstrapDialog.show({\r\n                type:type,\r\n                title: title,\r\n                message: template,\r\n                onshown: function(dialogItself)\r\n                {\r\n                    $rootScope.modalOpened = true;\r\n\r\n                    $('input.focus').focus();\r\n                    modalScope.$emit(\"modal:show\",{\r\n                        modalscope: modalScope,\r\n                        parentscope: parentScope,\r\n                        dialog: dialogItself\r\n                    });\r\n                },\r\n                onhide: function(dialogItself)\r\n                {\r\n                    $rootScope.modalOpened = false;\r\n\r\n                    modalScope.$emit(\"modal:hide\",{\r\n                        modalscope: modalScope,\r\n                        parentscope: parentScope,\r\n                        dialog: dialogItself\r\n                    });\r\n                    modalScope.$destroy();\r\n                }\r\n            });\r\n        };\r\n        interfaz.create = function(scope,title,uri,type,controller,ignoreloadingbar) {\r\n            if(ignoreloadingbar==undefined)\r\n            {\r\n                ignoreloadingbar = true;\r\n            }\r\n            parentScope = scope;\r\n            modalScope = scope.$new();\r\n\r\n            return $http.get(uri,{\r\n                ignoreLoadingBar: ignoreloadingbar\r\n            }).then(function(response) {\r\n                var toCompile = response.data;\r\n                if(controller) {\r\n                    toCompile = '<div ng-controller=\"'+controller+'\">'+response.data+'</div>';\r\n                }\r\n                interfaz.build(\r\n                    title,\r\n                    $compile(toCompile)(modalScope),\r\n                    type\r\n                );\r\n                return modalScope;\r\n            }, function errorCallback(response) {\r\n//                var toCompile = '<div class=\"alert alert-danger\">Ocurrio un error ('+response.status+') durante la operacion, intente nuevamente en unos minutos, si el problema persiste consulte con el supervisor de programacion de automatica<div>';\r\n                var toCompile = 'Ocurrio un error ('+response.status+') durante la operacion, intente nuevamente en unos minutos, si el problema persiste consulte con el administrador del sistema';\r\n                if(controller) {\r\n                    toCompile = '<div ng-controller=\"'+controller+'\">'+toCompile+'</div>';\r\n                }\r\n                interfaz.error(scope,toCompile);\r\n                /*                interfaz.build(\r\n                 title,\r\n                 $compile(toCompile)(modalScope),\r\n                 type\r\n                 );*/\r\n            });\r\n        };\r\n        interfaz.error = function(scope,err_msg) {\r\n            parentScope = scope;\r\n            modalScope = scope.$new();\r\n\r\n            var toCompile = '<div class=\"alert alert-danger\">'+err_msg+'<div>';\r\n\r\n            interfaz.build(\r\n                'ERROR',\r\n                $compile(toCompile)(modalScope),\r\n                BootstrapDialog.TYPE_DANGER\r\n            );\r\n            return modalScope;\r\n        };\r\n\r\n        return interfaz;\r\n    }]);\r\n"],"sourceRoot":"/source/"}