app.controller("proveedoresController",["$scope","$rootScope","$http","ProviderFactory","$log","$route","AgCore","$window","$cookies",function(e,o,r,t,n,a,i,c,s){function l(){t.requestAll().then(function(o){e.proveedores=o.data})}var u=s.proveedorCreado;if(n.log("estado "+u),"Exito"==u){var d={text:"Proveedor Creado Exitosamente!",title:"Exito!",type:"success",confirmButtonColor:"#DD6B55"};i.successSweetAlert({options:d})}else if("Error"==u){var d={text:"Ocurrió un error al intentar crear el Proveedor",title:"Error!",type:"error",confirmButtonColor:"#DD6B55"};i.successSweetAlert({options:d})}l(),e.btnClick=function(o,r,t,n,a){1==a?(e.proveedor="",e._addProvider=!0):(e.proveedor=n,e._addProvider=!1),e.openModal(o,r,t)},e.openModal=function(o,r,t){i.modal({scope:e,route:o,title:r,type:t,ignoreloadingbar:!0})};var p,f=o.$on("modal:show",function(e,o){p=o,f()});e.closeModal=function(){e.proveedor={},p.dialog.close()},e.eliminarProveedor=function(e){var o={title:"Esta seguro que deseas eliminar a "+e.nombre_fantasia,text:"No podrás recuperar este Proveedor en un futuro",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!!",cancelButtonText:"No, cancelar por favor!",closeOnConfirm:!1,closeOnCancel:!1,actionConfirmTitle:"Eliminado!",actionConfirmText:e.nombre_fantasia+" ha sido eliminado. En unos instantes de actualizará la lista.",actionConfirmRoute:"proveedores/destroy/"+e.id,actionConfirmType:"success",actionCancelTitle:"Cancelado",actionCancelText:"Tu Proveedor se salvó",actionCancelType:"error"};i.sweetAlert({options:o})},o.callBackSweetAlert=function(e){n.log(e),l()},e.updateProvider=function(o){t.update(o).then(function(o){var r={};l(),e.closeModal(),r="success"==o.data?{text:"Proveedor Actualizado Exitosamente!",title:"Exito!",type:"success",confirmButtonColor:"#DD6B55"}:{text:"Ocurrió un error al intentar crear el Proveedor",title:"Error!",type:"error",confirmButtonColor:"#DD6B55"},i.successSweetAlert({options:r})})}}]),app.factory("ProviderFactory",["$http","Crud",function(e,o){return{requestAll:function(){return o.Request("proveedores/index")},update:function(e){return o.Update(e,"proveedores/update")},"delete":function(e){return o.Delete(e,"proveedores/delete/")},requestCategories:function(){return o.Request("proveedores/categories/get")},updateCategories:function(e){return o.Update(e,"proveedores/update")},deleteCategories:function(e){return o.Delete(e,"proveedores/categorias/delete/")}}}]);