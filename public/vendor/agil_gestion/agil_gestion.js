var app=angular.module("app",["ngRoute","chieffancypants.loadingBar","ngAnimate","ui.bootstrap","angular-toasty","cfp.loadingBar","datatables","ngCookies"]);app.factory("AgCore",["$http","$rootScope","$q","cfpLoadingBar","Modal","$log",function(e,t,o,n,r,a){var i={};return i.http=function(t){var r,a,i=!1,c={};return c.canceled=!1,c.result=o.defer(),c.timeout=o.defer(),c.promise=null,c.cancel=function(){i=!0,c.timeout.resolve(),c.result.reject(),c.canceled=!0,n.complete()},t.timeout||(t.timeout=30),setTimeout(function(){i=!0,c.timeout.resolve()},1e3*t.timeout),a={method:t.method,url:t.url,cache:!1,timeout:c.timeout.promise},t.data&&(a.data=t.data),r=e(a),r.success(function(e,t,o,n){c.result.resolve(e)}),r.error(function(e,o,n,r){i?c.canceled||c.result.reject({error:"HTTP Timeout ("+t.timeout+" seg)"}):0===o?c.result.reject({error:"No se detecto conexion de red"}):c.result.reject({error:"ERROR: "+o})}),c},i.modal=function(e){var o=BootstrapDialog.TYPE_PRIMARY;switch(e.type){case"danger":o=BootstrapDialog.TYPE_DANGER;break;case"default":o=BootstrapDialog.TYPE_DEFAULT;break;case"success":o=BootstrapDialog.TYPE_SUCCESS;break;case"warning":o=BootstrapDialog.TYPE_WARNING;break;case"info":o=BootstrapDialog.TYPE_INFO;break;case"primary":o=BootstrapDialog.TYPE_PRIMARY}t.modalOpened||r.create(e.scope,e.title,e.route,o,e.controller,e.ignoreloadingbar)},i.modalError=function(e,o){t.modalOpened||r.error(e,o)},i.storage=function(e){if(!e.value){var t=window.localStorage.getItem(e.name);return e.json?JSON.parse(t):t}var o=e.value;e.json&&(o=JSON.stringify(e.value)),window.localStorage.setItem(e.name,o)},i.sweetAlert=function(o){var n=o.options;!function(o){"use strict";var r=function(){};r.prototype.init=function(){swal({title:n.title,text:n.text,type:n.type,showCancelButton:n.showCancelButton,confirmButtonColor:n.confirmButtonColor,confirmButtonText:n.confirmButtonText,cancelButtonText:n.cancelButtonText,closeOnConfirm:n.closeOnConfirm,closeOnCancel:n.closeOnCancel},function(o){return o?void e.get(n.actionConfirmRoute).then(function(e){"ok"==e.data?(swal(n.actionConfirmTitle,n.actionConfirmText,n.actionConfirmType),t.callBackSweetAlert("ya fueeeeee!!!")):(swal("Error","Ocurrió un error al intentar realizar la operaeción.","error"),t.callBackSweetAlert("apaaaa, no fueeee!!!"))}):(swal(n.actionCancelTitle,n.actionCancelText,n.actionCancelType),!1)})},o.SweetAlert=new r,o.SweetAlert.Constructor=r}(window.jQuery),function(e){"use strict";e.SweetAlert.init()}(window.jQuery)},i.successSweetAlert=function(e){var t=e.options;!function(e){"use strict";var o=function(){};o.prototype.init=function(){swal({title:t.title,text:t.text,type:t.type,showCancelButton:!1,confirmButtonColor:t.confirmButtonColor,confirmButtonText:"Cerrar",closeOnConfirm:!0},function(){swal()})},e.SweetAlert=new o,e.SweetAlert.Constructor=o}(window.jQuery),function(e){"use strict";e.SweetAlert.init()}(window.jQuery)},i}]),app.factory("Modal",["$http","$compile","$rootScope","$timeout",function(e,t,o,n){var r,a,i={};return i.build=function(e,t,n){void 0==n&&(n=BootstrapDialog.TYPE_PRIMARY),BootstrapDialog.show({type:n,title:e,message:t,onshown:function(e){o.modalOpened=!0,$("input.focus").focus(),r.$emit("modal:show",{modalscope:r,parentscope:a,dialog:e})},onhide:function(e){o.modalOpened=!1,r.$emit("modal:hide",{modalscope:r,parentscope:a,dialog:e}),r.$destroy()}})},i.create=function(o,n,c,l,u,s){return void 0==s&&(s=!0),a=o,r=o.$new(),e.get(c,{ignoreLoadingBar:s}).then(function(e){var o=e.data;return u&&(o='<div ng-controller="'+u+'">'+e.data+"</div>"),i.build(n,t(o)(r),l),r},function(e){var t="Ocurrio un error ("+e.status+") durante la operacion, intente nuevamente en unos minutos, si el problema persiste consulte con el administrador del sistema";u&&(t='<div ng-controller="'+u+'">'+t+"</div>"),i.error(o,t)})},i.error=function(e,o){a=e,r=e.$new();var n='<div class="alert alert-danger">'+o+"<div>";return i.build("ERROR",t(n)(r),BootstrapDialog.TYPE_DANGER),r},i}]);